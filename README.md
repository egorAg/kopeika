# üè¶ Kopeika ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ
**Kopeika** ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –ª–∏—á–Ω—ã—Ö –∏ —Å–µ–º–µ–π–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤.  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ **–≥–∏–ª—å–¥–∏–∏**, —É–ø—Ä–∞–≤–ª—è—é—Ç —Å–≤–æ–∏–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ —á–µ—Ä–µ–∑ **—Å—É–Ω–¥—É–∫–∏** (–∏–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤) –∏ –ø–æ–ª—É—á–∞—é—Ç **–∞—á–∏–≤–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã**.

---

## üöÄ –°—Ç–µ–∫
- **NestJS** (v11)
- **TypeORM**
- **PostgreSQL**
- **Redis**
- **Swagger** (API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** (access/refresh —Ç–æ–∫–µ–Ω—ã)

---

## üìÇ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- **User** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã.
- **Guild** ‚Äî –∏–≥—Ä–æ–≤–∞—è –≥–∏–ª—å–¥–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–æ–º.
- **GuildUser** ‚Äî —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≥–∏–ª—å–¥–∏–∏.
- **Chest** ‚Äî ¬´—Å—É–Ω–¥—É–∫¬ª (–∞–Ω–∞–ª–æ–≥ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á—ë—Ç–∞), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å:
  - –¥–µ–±–µ—Ç–æ–≤—ã–π,
  - –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞,
  - –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π,
  - –∫—Ä–µ–¥–∏—Ç,
  - —Ä–∞—Å—Å—Ä–æ—á–∫–∞,
  - –º–∏–∫—Ä–æ–∑–∞–π–º.

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ email.
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ **JWT**:
  - `accessToken` (–∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–π),
  - `refreshToken` (–æ–±–Ω–æ–≤–ª—è–µ–º—ã–π, —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î).
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏:
  - –≤—ã—Ö–æ–¥ —Å –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏,
  - –≤—ã—Ö–æ–¥ —Å–æ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π –∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π.

---

## üìò API

### Auth
- `POST /auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` ‚Äî –≤—Ö–æ–¥
- `POST /auth/refresh` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- `POST /auth/logout` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- `POST /auth/logout-all` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π, –∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π

### Guilds
- `POST /guilds` ‚Äî —Å–æ–∑–¥–∞—Ç—å –≥–∏–ª—å–¥–∏—é
- `GET /guilds` ‚Äî —Å–ø–∏—Å–æ–∫ –≥–∏–ª—å–¥–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /guilds/:id` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–∏–ª—å–¥–∏–∏
- `PATCH /guilds/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –≥–∏–ª—å–¥–∏—é
- `DELETE /guilds/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å –≥–∏–ª—å–¥–∏—é
- `POST /guilds/:id/users` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥–∏–ª—å–¥–∏—é
- `DELETE /guilds/:id/users/:userId` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥–∏–ª—å–¥–∏–∏

### Chests
- `POST /guilds/:guildId/chests` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Å—É–Ω–¥—É–∫ –≤ –≥–∏–ª—å–¥–∏–∏

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª—ã:
   - `/.env` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
   - `/api/.env` (–¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ API)

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   docker-compose up --build
   ```

3. –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

---

## ‚ö° Swagger
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ [http://localhost:3000/docs/](http://localhost:3000/docs/)

---

## üõ† –ü—Ä–∏–º–µ—Ä `.env`

### `api/.env`
```env
POSTGRES_USER=kopeika
POSTGRES_PASSWORD=kopeika
POSTGRES_DB=kopeika
POSTGRES_HOST=localhost
POSTGRES_PORT=5440

JWT_ACCESS_SECRET=super_access_secret_change_me
JWT_ACCESS_EXPIRES=15m
REFRESH_TTL_DAYS=30
BCRYPT_ROUNDS=12
```

### `/.env`
```env
# Postgres
POSTGRES_USER=kopeika
POSTGRES_PASSWORD=kopeika
POSTGRES_DB=kopeika
POSTGRES_HOST=localhost

# Redis
REDIS_PORT=6379

# API
API_PORT=3000
```
